<section style="max-width: 1100px; margin: 1rem auto; padding: 1rem;">
  <h1 style="font-size: 1.5rem; font-weight: 600; margin-bottom: .75rem;">Jugadores</h1>

  <!-- Filtros -->
  <form [formGroup]="form" style="display:grid; gap:.75rem; grid-template-columns: repeat(4, 1fr); margin-bottom: 1rem;">
    <input placeholder="Nombre" formControlName="name" />
    <input placeholder="Club" formControlName="club" />
    <input placeholder="Nacionalidad" formControlName="nationality" />
    <input placeholder="Posición" formControlName="position" />
    <input placeholder="Rating mín." type="number" formControlName="minRating" />
    <input placeholder="Rating máx." type="number" formControlName="maxRating" />
    <input placeholder="Speed mín." type="number" formControlName="minSpeed" />
    <input placeholder="Speed máx." type="number" formControlName="maxSpeed" />
  </form>

  <!-- Tabla -->
  <div style="position:relative; min-height: 120px;">
    <div *ngIf="loading" style="position:absolute; inset:0; display:grid; place-items:center;">
      <span>Cargando…</span>
    </div>

    <table style="width:100%; border-collapse:collapse;">
      <thead>
        <tr>
          <th>#</th>

          <th (click)="toggleSort('name')" style="cursor:pointer; user-select:none;">
            Nombre
            <span *ngIf="sort?.includes('name')">{{ sort === 'name' ? '▲' : '▼' }}</span>
          </th>

          <th (click)="toggleSort('club')" style="cursor:pointer; user-select:none;">
            Club
            <span *ngIf="sort?.includes('club')">{{ sort === 'club' ? '▲' : '▼' }}</span>
          </th>

          <th (click)="toggleSort('position')" style="cursor:pointer; user-select:none;">
            Posición
            <span *ngIf="sort?.includes('position')">{{ sort === 'position' ? '▲' : '▼' }}</span>
          </th>

          <th (click)="toggleSort('nationality')" style="cursor:pointer; user-select:none;">
            Nacionalidad
            <span *ngIf="sort?.includes('nationality')">{{ sort === 'nationality' ? '▲' : '▼' }}</span>
          </th>

          <th (click)="toggleSort('rating')" style="cursor:pointer; user-select:none;">
            Rating
            <span *ngIf="sort?.includes('rating')">{{ sort === 'rating' ? '▲' : '▼' }}</span>
          </th>

          <th (click)="toggleSort('speed')" style="cursor:pointer; user-select:none;">
            Speed
            <span *ngIf="sort?.includes('speed')">{{ sort === 'speed' ? '▲' : '▼' }}</span>
          </th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let r of data">
          <td>{{ r.id }}</td>
          <td>
            <a [routerLink]="['/players', r.id]" style="text-decoration:none;">
              {{ r.name }}
            </a>
          </td>
          <td>{{ r.club }}</td>
          <td>{{ r.position }}</td>
          <td>{{ r.nationality }}</td>
          <td>{{ r.rating }}</td>
          <td>{{ r.speed }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div style="display:flex; align-items:center; gap:.5rem; margin-top:.75rem;">
    <button (click)="prev()" [disabled]="page <= 1">Anterior</button>
    <span>Página {{ page }} de {{ totalPages }}</span>
    <button (click)="next()" [disabled]="page >= totalPages">Siguiente</button>

    <span style="flex:1"></span>

    <button (click)="export()">Exportar CSV</button>
  </div>

  <!-- Paginación -->
  <div style="display:flex; align-items:center; gap:.5rem; margin-top:.75rem;">
    <button (click)="prev()" [disabled]="page <= 1">Anterior</button>
    <span>Página {{ page }} de {{ totalPages }}</span>
    <button (click)="next()" [disabled]="page >= totalPages">Siguiente</button>
  </div>
</section>
